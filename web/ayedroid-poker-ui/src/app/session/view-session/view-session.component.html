<ng-container *transloco="let t">
  <section fxFill fxLayoutGap="7">
    <mat-card fxFlex="25" fxFill>
      <mat-card-header>
        <mat-card-title>{{ t("VIEW SESSION.PARTICIPANTS") }}</mat-card-title>
        <mat-card-subtitle
          >{{ session.participants.length }} online</mat-card-subtitle
        >
        <mat-icon mat-card-avatar>person</mat-icon>
      </mat-card-header>
      <mat-divider></mat-divider>
      <mat-card-content>
        <mat-list dense>
          <mat-list-item *ngFor="let participant of session.participants">
            <mat-icon mat-list-icon>group</mat-icon>
            <div mat-line>{{ participant.name }}</div>
            <div mat-line>{{ participant.type }}</div>
            <button mat-icon-button [matMenuTriggerFor]="menu">
              <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item>
                <mat-icon>badge</mat-icon>
                <span>{{ t("VIEW SESSION.CHANGE PERMISSIONS") }}</span>
              </button>
              <button mat-menu-item>
                <mat-icon>person_remove</mat-icon>
                <span>{{ t("VIEW SESSION.REMOVE") }}</span>
              </button>
            </mat-menu>
          </mat-list-item>
        </mat-list>
      </mat-card-content>
    </mat-card>

    <section fxLayout="column" fxFlex="75" fxLayoutGap="7">
      <mat-card>
        <mat-card-header>
          <mat-card-title>{{ currentTopic.name }}</mat-card-title>
          <mat-card-subtitle>{{
            currentTopic.description
              ? currentTopic.description
              : t("VIEW SESSION.NO DESCRIPTION")
          }}</mat-card-subtitle>
          <mat-icon mat-card-avatar>ballot</mat-icon>
        </mat-card-header>
        <mat-divider></mat-divider>
        <mat-card-content>
          <mat-selection-list
            [multiple]="false"
            (selectionChange)="onSizeChoiceChange($event)"
          >
            <mat-list-option
              *ngFor="let size of session?.sizes"
              [value]="size.id"
            >
              {{ size.name }}
              <mat-icon
                matListIcon
                [color]="sizeChoice === size.id ? 'accent' : 'default'"
                >{{
                  sizeChoice === size.id
                    ? "radio_button_checked"
                    : "radio_button_unchecked"
                }}</mat-icon
              >
            </mat-list-option>
          </mat-selection-list>
        </mat-card-content>
        <mat-card-actions align="end">
          <button
            mat-stroked-button
            (click)="completeEarly()"
            class="margin-horizontal"
          >
            {{ t("VIEW SESSION.COMPLETE EARLY") }}
          </button>
          <button
            mat-flat-button
            color="accent"
            (click)="nextTopic()"
            class="margin-horizontal"
          >
            {{ t("VIEW SESSION.NEXT TOPIC") }}
          </button>
        </mat-card-actions>
      </mat-card>
      <section fxLayout="column" fxFlex class="vertical-scrollbar">
        <mat-accordion>
          <mat-expansion-panel *ngFor="let topic of topicHistory">
            <mat-expansion-panel-header>
              <mat-panel-title>{{ topic.name }}</mat-panel-title>
              <mat-panel-description
                >{{
                  topic.description
                    ? topic.description
                    : t("VIEW SESSION.NO DESCRIPTION")
                }}
              </mat-panel-description>
            </mat-expansion-panel-header>
            <p>This is the primary content of the panel.</p>
          </mat-expansion-panel>
        </mat-accordion>
      </section>
    </section>
  </section>
</ng-container>
